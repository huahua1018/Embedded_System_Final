#### 這是一個1A2B猜數字遊戲，玩家一利用8051來輸入猜測的數字，玩家二則透過手機的MyMQTT來出題目，而ESP32則類似裁判的角色，負責控制遊戲的開始和結束以及上傳遊戲紀錄。

詳細介紹可見 [1A2B小遊戲報告](1A2B小遊戲報告.pdf)

## 遊戲流程

### 前置作業
首先，玩家一需使用8051的16 keyboard按下8個號碼(代表玩家帳號)，並藉由UART傳送給ESP32，按下的帳號會顯示在七段顯示器上，且該帳號會儲存在8051的EEPROM中，除非長按一秒登出鍵，否則8051重開機後依然會保持登入狀態。此時ESP32會透過MyMQTT傳送指令給玩家二，要求玩家二輸入8位數帳號，玩家二同樣透過MyMQTT傳送帳號給ESP32，ESP32確認接收玩家二的帳號後，會再傳送要求輸入題目的指令，並且會檢查玩家二傳送的題目是否符合「四個數字不重複」的規則，若不符合則會傳送指令要求重新輸入。EP32確認兩個玩家皆已登入帳號，且玩家二也出完題目後，便會宣布遊戲開始，並啟動倒數計時5分鐘。

### 遊戲進行中
8051收到遊戲開始的通知時，會有遊戲開始的音效，且可看到七段顯示器左半部有遊戲剩餘時間，以及LED燈顯示剩餘幾次猜測機會(總共5次)，之後便可用16鍵盤來輸入猜測的數字，猜測的數字會顯示在七段顯示器的右半部，按下enter鍵後，會透過UART傳給ESP32檢查猜測的數字，若猜測的數字不符合「四個數字不重複」的規則，會收到Error指令及播放音效，此次不會消耗猜測機會，可藉由刪除鍵修改答案後再傳送一次，接著會由ESP32回覆結果。猜錯會收到比對結果(ex:1A2B)及播放錯誤音效，玩家一需要繼續猜測，可透過上下鍵來從七段顯示器查看過去猜測的紀錄，猜錯五次則為玩家二獲勝；若猜對則播放勝利音效，且此時七段顯示器顯示登入的帳號，直到登出或新一場遊戲開始。遊戲進行當中，會將遊戲過程傳給玩家二，也會透過IFTTT傳到google表單。其中，若玩家一在遊戲中途登出，則視為玩家二獲勝。

### 後置作業
遊戲結束後，ESP32會將最終結果傳給玩家二，並更新到firebase，firebase記錄著每個帳號的輸贏次數。之後重新初始化參數，並透過MyMQTT詢問玩家二是否繼續遊戲，玩家一若為登入狀態則自動回覆帳號。

## 功能敘述
* ESP32
    * Timer：遊戲時間倒數計時300秒
    * UART：接收8051傳來的帳號、猜測的數字...等，且可回傳遊戲開始、結束等訊號，以及控制8051上的時間。
    * Firebase：連接網路更新兩個玩家的戰績。
    * IFTTT：將遊戲過程上傳到google表單。
    * MQTT：傳送遊戲過程通知給使用MyMQTT的玩家二，以及接收該玩家設定的帳號、數字題目。

* 8051
    * EEPROM：存取玩家一的帳號。
    * 七段顯示器：顯示玩家一輸入的帳號、按下的數字、結果(幾A幾B)、比賽剩餘時間。
    * 喇叭：遊戲開始、結束、猜錯...等音效。
    * 16 keyboard：玩家一輸入帳號、猜測的數字，可查看紀錄、清除當前輸入。
    * LED：顯示剩餘猜測機會。
    * UART：傳送帳號、猜測的數字給ESP32。

* 手機

  * MyMQTT：傳送帳號、數字題目給ESP32。
